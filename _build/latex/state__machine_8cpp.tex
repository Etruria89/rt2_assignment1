\hypertarget{state__machine_8cpp}{}\doxysection{src/state\+\_\+machine.cpp File Reference}
\label{state__machine_8cpp}\index{src/state\_machine.cpp@{src/state\_machine.cpp}}


This files defines a finite state machine for the control of the holonomic robot.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Command.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}rt2\+\_\+assignment1/\+Random\+Position.\+h\char`\"{}}\newline
{\ttfamily \#include $<$actionlib/client/simple\+\_\+action\+\_\+client.\+h$>$}\newline
{\ttfamily \#include $<$actionlib/client/terminal\+\_\+state.\+h$>$}\newline
{\ttfamily \#include $<$rt2\+\_\+assignment1/\+Control2\+\_\+1\+Action.\+h$>$}\newline
Include dependency graph for state\+\_\+machine.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{state__machine_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}{user\+\_\+interface}} (rt2\+\_\+assignment1\+::\+Command\+::\+Request \&req, rt2\+\_\+assignment1\+::\+Command\+::\+Response \&res)
\item 
void \mbox{\hyperlink{state__machine_8cpp_af153587caa3d79dc57717d77da86ed00}{done}} (const actionlib\+::\+Simple\+Client\+Goal\+State \&goal\+\_\+state, const rt2\+\_\+assignment1\+::\+Control2\+\_\+1\+Result\+Const\+Ptr \&result)
\item 
$\ast$$\ast$int \mbox{\hyperlink{state__machine_8cpp_a4ed8825e33b2e8f99b2f3c61971684ee}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{state__machine_8cpp_ab376b87f96a574a793c03c53e75afec8}\label{state__machine_8cpp_ab376b87f96a574a793c03c53e75afec8}} 
bool {\bfseries start} = false
\item 
\mbox{\Hypertarget{state__machine_8cpp_a53a2d16dac430353052f49aaa0cce34a}\label{state__machine_8cpp_a53a2d16dac430353052f49aaa0cce34a}} 
bool {\bfseries stop} = false
\item 
\mbox{\Hypertarget{state__machine_8cpp_a89f234133d3efe315836311cbf21c64b}\label{state__machine_8cpp_a89f234133d3efe315836311cbf21c64b}} 
int {\bfseries state} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This files defines a finite state machine for the control of the holonomic robot. 

\begin{DoxyAuthor}{Author}
Federico Danzi 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
0.\+1 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06/06/2021
\end{DoxyDate}
Services \+: ~\newline
 /user\+\_\+interface

Clients \+: /position\+\_\+server

Action Client \+: /go\+\_\+to\+\_\+point

Description \+:

This node implements the finite state machine for the input on the control of the holonomic robot. It includes\+:
\begin{DoxyItemize}
\item An Action client \char`\"{}go\+\_\+to\+\_\+point\char`\"{} that interacts with the action \char`\"{}\+Control2\+\_\+1\char`\"{} to\+:
\begin{DoxyItemize}
\item set a new goal
\item check if the goal has been reached
\item check if the goal has been cancelled
\item Define the new state
\end{DoxyItemize}
\item A Service server that advertise the command line user interface
\item A Service client that requires a new target postion from the /position\+\_\+server 
\end{DoxyItemize}

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{state__machine_8cpp_af153587caa3d79dc57717d77da86ed00}\label{state__machine_8cpp_af153587caa3d79dc57717d77da86ed00}} 
\index{state\_machine.cpp@{state\_machine.cpp}!done@{done}}
\index{done@{done}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{done()}{done()}}
{\footnotesize\ttfamily void done (\begin{DoxyParamCaption}\item[{const actionlib\+::\+Simple\+Client\+Goal\+State \&}]{goal\+\_\+state,  }\item[{const rt2\+\_\+assignment1\+::\+Control2\+\_\+1\+Result\+Const\+Ptr \&}]{result }\end{DoxyParamCaption})}

Callback launched at the end of the action

This function is launched once the goal of of the action is reached.


\begin{DoxyParams}{Parameters}
{\em goal\+\_\+state} & (const actionlib\+::\+Simple\+Client\+Goal\+State\&)\+: The goal state reached. \\
\hline
{\em result} & (const rt2\+\_\+assignment1\+::\+Pose\+Result\+Const\+Ptr\&)\+: The result of the action. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{state__machine_8cpp_a4ed8825e33b2e8f99b2f3c61971684ee}\label{state__machine_8cpp_a4ed8825e33b2e8f99b2f3c61971684ee}} 
\index{state\_machine.cpp@{state\_machine.cpp}!main@{main}}
\index{main@{main}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily $\ast$ $\ast$ int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

The main core of the finite state machine that handles the state update

It includes\+:
\begin{DoxyItemize}
\item An Action client \char`\"{}go\+\_\+to\+\_\+point\char`\"{} that interacts with the action \char`\"{}\+Control2\+\_\+1\char`\"{} to\+:
\begin{DoxyItemize}
\item set a new goal
\item check if the goal has been reached
\item check if the goal has been cancelled
\item Define the new state
\end{DoxyItemize}
\end{DoxyItemize}

A Service server that advertise the command line user interface
\begin{DoxyItemize}
\item A Service client that requires a new target postion from the /position\+\_\+server 
\end{DoxyItemize}\mbox{\Hypertarget{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}\label{state__machine_8cpp_a1a9543636935547580c0657f4c7c0c2b}} 
\index{state\_machine.cpp@{state\_machine.cpp}!user\_interface@{user\_interface}}
\index{user\_interface@{user\_interface}!state\_machine.cpp@{state\_machine.cpp}}
\doxysubsubsection{\texorpdfstring{user\_interface()}{user\_interface()}}
{\footnotesize\ttfamily bool user\+\_\+interface (\begin{DoxyParamCaption}\item[{rt2\+\_\+assignment1\+::\+Command\+::\+Request \&}]{req,  }\item[{rt2\+\_\+assignment1\+::\+Command\+::\+Response \&}]{res }\end{DoxyParamCaption})}

Service callback of the user interface Service Server setting the start/stop robot state

Service call header (unused). 
\begin{DoxyParams}{Parameters}
{\em req} & (const std\+::shared\+\_\+ptr$<$\+Command\+::\+Request$>$)\+: Service request, containing the command (string). \\
\hline
{\em res} & (const std\+::shared\+\_\+ptr$<$\+Command\+::\+Response$>$)\+: Service response, the value of the \textquotesingle{}start\textquotesingle{} state (bool). \\
\hline
\end{DoxyParams}
